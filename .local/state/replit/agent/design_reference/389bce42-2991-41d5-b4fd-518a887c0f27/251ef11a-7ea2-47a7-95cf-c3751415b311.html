<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Psicóloga Em Outra Dimensão - Gerador de Mapa Astral</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    'primary': '#D81B60',
                    'primary-light': '#FFB6C1',
                    'primary-dark': '#AD1457',
                    'text-primary': '#222222',
                    'glass-white': 'rgba(255, 255, 255, 0.25)',
                    'glass-border': 'rgba(255, 255, 255, 0.18)'
                },
                fontFamily: {
                    'inter': ['Inter', 'system-ui', 'sans-serif']
                },
                backdropBlur: {
                    'xs': '2px',
                }
            }
        }
    };
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #FEE7F1 0%, #E91E63 100%);
        }
        
        .astral-chart-placeholder {
            background: radial-gradient(circle at center, rgba(255, 255, 255, 0.3) 0%, rgba(255, 255, 255, 0.1) 70%);
            backdrop-filter: blur(5px);
        }
        
        .floating-label {
            transition: all 0.2s ease-in-out;
        }
        
        .form-input:focus + .floating-label,
        .form-input:not(:placeholder-shown) + .floating-label {
            transform: translateY(-1.5rem) scale(0.75);
            color: #D81B60;
        }
        
        .btn-primary {
            background: #D81B60;
            color: #FFFFFF;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover:not(:disabled) {
            background: #AD1457;
            transform: translateY(-1px);
            box-shadow: 0 10px 25px rgba(216, 27, 96, 0.3);
        }
        
        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .loading-spinner {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="font-inter text-text-primary min-h-screen gradient-bg">
    <!-- @COMPONENT: Header -->
    <header class="glass-effect fixed top-0 left-0 right-0 z-50 backdrop-blur-md">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 rounded-full bg-primary flex items-center justify-center">
                        <i class="fas fa-moon text-white text-lg" aria-hidden="true"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-text-primary">Psicóloga Em Outra Dimensão</h1>
                        <p class="text-sm text-text-primary/70">Gerador de Mapa Astral</p>
                    </div>
                </div>
                <button class="glass-effect p-2 rounded-lg hover:bg-white/30 transition-colors" aria-label="Menu de acessibilidade">
                    <i class="fas fa-universal-access text-text-primary" aria-hidden="true"></i>
                </button>
            </div>
        </div>
    </header>
    <!-- @END_COMPONENT: Header -->

    <main class="pt-24 pb-8">
        <!-- @COMPONENT: HeroSection -->
        <section class="container mx-auto px-4 mb-12">
            <div class="text-center mb-8">
                <h2 class="text-4xl md:text-5xl font-bold mb-4 text-text-primary">
                    Descubra Seu Mapa Astral
                </h2>
                <p class="text-lg text-text-primary/80 max-w-2xl mx-auto">
                    Gere seu mapa astral completo em segundos. Sem cadastro, totalmente gratuito, 
                    com relatório detalhado para download.
                </p>
            </div>

            <!-- @COMPONENT: BirthDataForm -->
            <div class="max-w-2xl mx-auto glass-effect rounded-2xl p-8 shadow-2xl">
                <form id="birthDataForm" class="space-y-6" novalidate>
                    <div class="grid md:grid-cols-2 gap-6">
                        <!-- Nome completo -->
                        <div class="relative">
                            <input 
                                type="text" 
                                id="fullName" 
                                name="fullName"
                                class="form-input w-full px-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg 
                                       text-text-primary placeholder-transparent focus:outline-none focus:ring-2 focus:ring-primary 
                                       focus:border-transparent transition-all duration-200"
                                placeholder="Seu nome completo"
                                required
                                aria-describedby="fullName-error"
                                data-bind="form.fullName"
                            />
                            <label for="fullName" class="floating-label absolute left-4 top-3 text-text-primary/70 pointer-events-none">
                                Nome completo
                            </label>
                            <div id="fullName-error" class="text-red-500 text-sm mt-1 hidden" role="alert"></div>
                        </div>

                        <!-- Data de nascimento -->
                        <div class="relative">
                            <input 
                                type="date" 
                                id="birthDate" 
                                name="birthDate"
                                class="form-input w-full px-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg 
                                       text-text-primary focus:outline-none focus:ring-2 focus:ring-primary 
                                       focus:border-transparent transition-all duration-200"
                                required
                                aria-describedby="birthDate-error"
                                data-bind="form.birthDate"
                            />
                            <label for="birthDate" class="absolute left-4 -top-2 text-xs text-primary bg-white/50 px-2 rounded">
                                Data de nascimento
                            </label>
                            <div id="birthDate-error" class="text-red-500 text-sm mt-1 hidden" role="alert"></div>
                        </div>

                        <!-- Hora de nascimento -->
                        <div class="relative">
                            <input 
                                type="time" 
                                id="birthTime" 
                                name="birthTime"
                                class="form-input w-full px-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg 
                                       text-text-primary focus:outline-none focus:ring-2 focus:ring-primary 
                                       focus:border-transparent transition-all duration-200"
                                required
                                aria-describedby="birthTime-error"
                                data-bind="form.birthTime"
                            />
                            <label for="birthTime" class="absolute left-4 -top-2 text-xs text-primary bg-white/50 px-2 rounded">
                                Hora de nascimento
                            </label>
                            <div id="birthTime-error" class="text-red-500 text-sm mt-1 hidden" role="alert"></div>
                        </div>

                        <!-- Cidade de nascimento -->
                        <div class="relative">
                            <input 
                                type="text" 
                                id="birthCity" 
                                name="birthCity"
                                class="form-input w-full px-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg 
                                       text-text-primary placeholder-transparent focus:outline-none focus:ring-2 focus:ring-primary 
                                       focus:border-transparent transition-all duration-200"
                                placeholder="Cidade de nascimento"
                                required
                                aria-describedby="birthCity-error"
                                data-bind="form.birthCity"
                                autocomplete="address-level2"
                            />
                            <label for="birthCity" class="floating-label absolute left-4 top-3 text-text-primary/70 pointer-events-none">
                                Cidade de nascimento
                            </label>
                            <div id="birthCity-error" class="text-red-500 text-sm mt-1 hidden" role="alert"></div>
                            <!-- @FUNCTIONALITY: Implement city autocomplete with timezone detection -->
                        </div>
                    </div>

                    <div class="text-center">
                        <button 
                            type="submit" 
                            id="generateBtn"
                            class="btn-primary px-8 py-4 rounded-lg font-semibold text-lg shadow-lg 
                                   hover:shadow-xl transform transition-all duration-300 disabled:opacity-50"
                            data-event="click:handleGenerateChart"
                        >
                            <span id="btnText">
                                <i class="fas fa-stars mr-2" aria-hidden="true"></i>
                                Gerar Mapa Astral
                            </span>
                            <span id="btnLoading" class="hidden">
                                <i class="fas fa-spinner loading-spinner mr-2" aria-hidden="true"></i>
                                Gerando...
                            </span>
                        </button>
                    </div>

                    <p class="text-center text-sm text-text-primary/60">
                        <i class="fas fa-shield-alt mr-1" aria-hidden="true"></i>
                        Seus dados são processados localmente e não são armazenados
                    </p>
                </form>
            </div>
            <!-- @END_COMPONENT: BirthDataForm -->
        </section>
        <!-- @END_COMPONENT: HeroSection -->

        <!-- @COMPONENT: ResultsSection -->
        <section id="resultsSection" class="container mx-auto px-4 hidden">
            <div class="text-center mb-8">
                <h3 class="text-3xl font-bold text-text-primary mb-2">Seu Mapa Astral</h3>
                <p class="text-text-primary/70" data-bind="user.name">Para [Nome do usuário]</p>
            </div>

            <div class="grid lg:grid-cols-2 gap-8 max-w-6xl mx-auto">
                <!-- @COMPONENT: AstralChart -->
                <div class="glass-effect rounded-2xl p-6 shadow-2xl">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-xl font-semibold text-text-primary">Carta Natal</h4>
                        <button 
                            id="downloadSVG"
                            class="glass-effect px-4 py-2 rounded-lg text-text-primary hover:bg-white/30 transition-colors"
                            data-event="click:downloadSVG"
                            aria-label="Baixar carta em SVG"
                        >
                            <i class="fas fa-download mr-2" aria-hidden="true"></i>
                            SVG
                        </button>
                    </div>
                    
                    <!-- Astral chart placeholder -->
                    <div class="astral-chart-placeholder aspect-square rounded-xl flex items-center justify-center relative overflow-hidden">
                        <!-- @FUNCTIONALITY: This should render the actual astral chart SVG from API -->
                        <div class="absolute inset-4 border-2 border-white/30 rounded-full"></div>
                        <div class="absolute inset-8 border border-white/20 rounded-full"></div>
                        <div class="absolute inset-12 border border-white/10 rounded-full"></div>
                        
                        <!-- Zodiac signs placeholder -->
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div class="grid grid-cols-4 gap-4 text-center">
                                <!-- @MAP: zodiacSigns.map(sign => ( -->
                                <div class="text-white/80 text-sm font-medium" data-mock="true">♈</div>
                                <div class="text-white/80 text-sm font-medium" data-mock="true">♉</div>
                                <div class="text-white/80 text-sm font-medium" data-mock="true">♊</div>
                                <div class="text-white/80 text-sm font-medium" data-mock="true">♋</div>
                                <!-- @END_MAP )) -->
                            </div>
                        </div>
                        
                        <!-- Planets placeholder -->
                        <div class="absolute top-1/4 left-1/4 w-3 h-3 bg-yellow-400 rounded-full shadow-lg" data-mock="true" title="Sol"></div>
                        <div class="absolute top-1/3 right-1/4 w-2 h-2 bg-blue-400 rounded-full shadow-lg" data-mock="true" title="Lua"></div>
                        <div class="absolute bottom-1/3 left-1/3 w-2 h-2 bg-red-400 rounded-full shadow-lg" data-mock="true" title="Marte"></div>
                        
                        <div class="text-center text-white/60">
                            <i class="fas fa-circle-notch text-4xl mb-2" aria-hidden="true"></i>
                            <p class="text-sm">Carta será renderizada aqui</p>
                        </div>
                    </div>
                </div>
                <!-- @END_COMPONENT: AstralChart -->

                <!-- @COMPONENT: ReportPreview -->
                <div class="glass-effect rounded-2xl p-6 shadow-2xl">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-xl font-semibold text-text-primary">Relatório Completo</h4>
                        <button 
                            id="downloadPDF"
                            class="btn-primary px-4 py-2 rounded-lg"
                            data-event="click:downloadPDF"
                            aria-label="Baixar relatório em PDF"
                        >
                            <i class="fas fa-file-pdf mr-2" aria-hidden="true"></i>
                            PDF
                        </button>
                    </div>

                    <div class="space-y-4 max-h-96 overflow-y-auto">
                        <!-- @FUNCTIONALITY: This should be populated with actual report data -->
                        <div class="bg-white/10 rounded-lg p-4" data-mock="true">
                            <h5 class="font-semibold text-text-primary mb-2">
                                <i class="fas fa-sun mr-2 text-yellow-500" aria-hidden="true"></i>
                                Sol em Áries
                            </h5>
                            <p class="text-sm text-text-primary/80">
                                Sua personalidade é marcada pela energia e iniciativa. 
                                Você tende a ser um líder natural, sempre pronto para novos desafios...
                            </p>
                        </div>

                        <div class="bg-white/10 rounded-lg p-4" data-mock="true">
                            <h5 class="font-semibold text-text-primary mb-2">
                                <i class="fas fa-moon mr-2 text-blue-400" aria-hidden="true"></i>
                                Lua em Câncer
                            </h5>
                            <p class="text-sm text-text-primary/80">
                                Suas emoções são profundas e intuitivas. Você possui uma forte 
                                conexão com o lar e a família...
                            </p>
                        </div>

                        <div class="bg-white/10 rounded-lg p-4" data-mock="true">
                            <h5 class="font-semibold text-text-primary mb-2">
                                <i class="fas fa-home mr-2 text-green-500" aria-hidden="true"></i>
                                Ascendente em Libra
                            </h5>
                            <p class="text-sm text-text-primary/80">
                                Você projeta uma imagem de harmonia e equilíbrio. Outras pessoas 
                                te veem como alguém diplomático...
                            </p>
                        </div>

                        <!-- @MAP: reportSections.map(section => ( -->
                        <div class="text-center text-text-primary/60 py-4" data-mock="true">
                            <i class="fas fa-ellipsis-h" aria-hidden="true"></i>
                            <p class="text-sm mt-2">E muito mais no relatório completo...</p>
                        </div>
                        <!-- @END_MAP )) -->
                    </div>
                </div>
                <!-- @END_COMPONENT: ReportPreview -->
            </div>

            <!-- Share and actions -->
            <div class="text-center mt-12">
                <div class="glass-effect inline-flex items-center space-x-4 px-6 py-4 rounded-full">
                    <button class="text-text-primary hover:text-primary transition-colors" aria-label="Compartilhar no WhatsApp">
                        <i class="fab fa-whatsapp text-xl" aria-hidden="true"></i>
                    </button>
                    <button class="text-text-primary hover:text-primary transition-colors" aria-label="Compartilhar no Facebook">
                        <i class="fab fa-facebook text-xl" aria-hidden="true"></i>
                    </button>
                    <button class="text-text-primary hover:text-primary transition-colors" aria-label="Compartilhar no Instagram">
                        <i class="fab fa-instagram text-xl" aria-hidden="true"></i>
                    </button>
                    <div class="w-px h-6 bg-white/30"></div>
                    <button id="generateNew" class="text-text-primary hover:text-primary transition-colors">
                        <i class="fas fa-redo mr-2" aria-hidden="true"></i>
                        Novo Mapa
                    </button>
                </div>
            </div>
        </section>
        <!-- @END_COMPONENT: ResultsSection -->

        <!-- @COMPONENT: LoadingOverlay -->
        <div id="loadingOverlay" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center">
            <div class="glass-effect rounded-2xl p-8 text-center max-w-sm mx-4">
                <div class="loading-spinner w-12 h-12 border-4 border-white/30 border-t-primary rounded-full mx-auto mb-4"></div>
                <h3 class="text-xl font-semibold text-text-primary mb-2">Gerando seu mapa astral</h3>
                <p class="text-text-primary/70 text-sm">
                    Calculando posições planetárias e aspectos astrológicos...
                </p>
                <div class="mt-4 bg-white/20 rounded-full h-2 overflow-hidden">
                    <div class="bg-primary h-full rounded-full transition-all duration-1000" style="width: 45%" data-mock="true"></div>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: LoadingOverlay -->

        <!-- @COMPONENT: ErrorMessage -->
        <div id="errorMessage" class="fixed bottom-4 right-4 glass-effect rounded-lg p-4 text-white max-w-sm hidden z-50" role="alert">
            <div class="flex items-start space-x-3">
                <i class="fas fa-exclamation-triangle text-red-400 mt-1" aria-hidden="true"></i>
                <div>
                    <h4 class="font-semibold">Erro na geração</h4>
                    <p class="text-sm text-white/80" id="errorText">Mensagem de erro aparecerá aqui</p>
                </div>
                <button onclick="hideError()" class="text-white/60 hover:text-white" aria-label="Fechar mensagem de erro">
                    <i class="fas fa-times" aria-hidden="true"></i>
                </button>
            </div>
        </div>
        <!-- @END_COMPONENT: ErrorMessage -->
    </main>

    <!-- @COMPONENT: Footer -->
    <footer class="glass-effect mt-12 py-8">
        <div class="container mx-auto px-4 text-center">
            <p class="text-text-primary/70 text-sm">
                © 2024 Psicóloga Em Outra Dimensão. Todos os direitos reservados.
            </p>
            <p class="text-text-primary/60 text-xs mt-2">
                Desenvolvido com ❤️ para autoconhecimento e crescimento pessoal
            </p>
        </div>
    </footer>
    <!-- @END_COMPONENT: Footer -->

    <script>
        // @STATE: formData:object = {}
        // @STATE: isLoading:boolean = false
        // @STATE: chartGenerated:boolean = false

        (function() {
            'use strict';
            
            // Form validation and submission
            const form = document.getElementById('birthDataForm');
            const generateBtn = document.getElementById('generateBtn');
            const btnText = document.getElementById('btnText');
            const btnLoading = document.getElementById('btnLoading');
            const loadingOverlay = document.getElementById('loadingOverlay');
            const resultsSection = document.getElementById('resultsSection');
            const errorMessage = document.getElementById('errorMessage');

            // Real-time validation
            const inputs = form.querySelectorAll('input[required]');
            inputs.forEach(input => {
                input.addEventListener('blur', validateField);
                input.addEventListener('input', clearFieldError);
            });

            function validateField(event) {
                const field = event.target;
                const errorDiv = document.getElementById(field.name + '-error');
                
                if (!field.validity.valid) {
                    let message = '';
                    if (field.validity.valueMissing) {
                        message = 'Este campo é obrigatório';
                    } else if (field.validity.typeMismatch) {
                        message = 'Formato inválido';
                    }
                    
                    errorDiv.textContent = message;
                    errorDiv.classList.remove('hidden');
                    field.classList.add('border-red-500');
                } else {
                    clearFieldError(event);
                }
            }

            function clearFieldError(event) {
                const field = event.target;
                const errorDiv = document.getElementById(field.name + '-error');
                errorDiv.classList.add('hidden');
                field.classList.remove('border-red-500');
            }

            // Form submission
            form.addEventListener('submit', async function(event) {
                event.preventDefault();
                
                // Validate all fields
                let isValid = true;
                inputs.forEach(input => {
                    input.dispatchEvent(new Event('blur'));
                    if (!input.validity.valid) {
                        isValid = false;
                    }
                });

                if (!isValid) {
                    showError('Por favor, corrija os erros no formulário');
                    return;
                }

                // TODO: Implement actual chart generation logic
                await generateChart();
            });

            async function generateChart() {
                try {
                    setLoading(true);
                    
                    // Simulate API call delay
                    await new Promise(resolve => setTimeout(resolve, 3000));
                    
                    // TODO: Implement RapidAPI Astrologer integration
                    // const chartData = await fetchBirthChart(formData);
                    // const pdfReport = await generatePDFReport(chartData);
                    
                    setLoading(false);
                    showResults();
                    
                } catch (error) {
                    setLoading(false);
                    showError('Erro ao gerar o mapa astral. Tente novamente.');
                    console.error('Chart generation error:', error);
                }
            }

            function setLoading(loading) {
                if (loading) {
                    btnText.classList.add('hidden');
                    btnLoading.classList.remove('hidden');
                    generateBtn.disabled = true;
                    loadingOverlay.classList.remove('hidden');
                } else {
                    btnText.classList.remove('hidden');
                    btnLoading.classList.add('hidden');
                    generateBtn.disabled = false;
                    loadingOverlay.classList.add('hidden');
                }
            }

            function showResults() {
                resultsSection.classList.remove('hidden');
                resultsSection.classList.add('fade-in');
                resultsSection.scrollIntoView({ behavior: 'smooth' });
            }

            function showError(message) {
                document.getElementById('errorText').textContent = message;
                errorMessage.classList.remove('hidden');
                setTimeout(() => {
                    errorMessage.classList.add('hidden');
                }, 5000);
            }

            window.hideError = function() {
                errorMessage.classList.add('hidden');
            };

            // Download functionality
            document.getElementById('downloadSVG')?.addEventListener('click', function() {
                // TODO: Implement SVG download
                console.log('Downloading SVG chart...');
            });

            document.getElementById('downloadPDF')?.addEventListener('click', function() {
                // TODO: Implement PDF download
                console.log('Downloading PDF report...');
            });

            document.getElementById('generateNew')?.addEventListener('click', function() {
                form.reset();
                resultsSection.classList.add('hidden');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            // Accessibility enhancements
            document.addEventListener('keydown', function(event) {
                // Escape key closes error message
                if (event.key === 'Escape' && !errorMessage.classList.contains('hidden')) {
                    hideError();
                }
            });

            // Auto-focus first input on page load
            window.addEventListener('load', function() {
                document.getElementById('fullName').focus();
            });

        })();
    </script>
</body>
</html>